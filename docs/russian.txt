  [TRSLodEdt]
SDeleteQuestion Вы уверены, что хотите удалить "%s" из архива?
SDeleteManyQuestion Вы уверены, что хотите удалить выделенные файлы из архива?
SNewFolder  Новая папка
SExtractAs  Экспортировать как...
SExtractTo  Экспортировать в...
SEPaletteNotFound Не найдена подходящая палитра в bitmaps.lod
SEPaletteMustExist  Изображение должно содержать 256 цветов и палитра должна быть добавлена в bitmaps.lod
SPalette  Палитра: %d
SPaletteChanged Палитра: %d (показана: %d)
RSSpeedButton1.Hint Растянуть
RSSpeedButton2.Hint Проигрывать
OpenDialog1.Filter  Архивы Might&Magic или Heroes 3 (*.lod; *.snd; *.vid; *.mm6; *.mm7; *.dod)|*.lod;*.snd;*.vid;*.mm6;*.mm7;*.dod|Все файлы|*.*
AddFolder1.Caption  Создать папку
AddFile1.Caption  Добавить файл
MergeFavorites1.Caption Добавить Избранное из...
Cut1.Caption  &Вырезать
Copy1.Caption &Копировать
Paste1.Caption  Вст&авить
Delete1.Caption &Удалить
Rename1.Caption Переименовать
Extract1.Caption  Экспортировать
Delete2.Caption Удалить
AddtoFavorites1.Caption Добавить в Избранное
OpenDialog2.Filter  Избранное (*.lf)|*.lf|All files|*.*
File1.Caption Файл
New1.Caption  Новый
Open1.Caption Открыть
RecentFiles1.Caption  Недавние документы
Exit1.Caption Выход
Edit1.Caption Редактировать
Add1.Caption  Добавить...
Extract2.Caption  Экспортировать
ExtractTo2.Caption  Экспортировать в...
Delete3.Caption &Удалить
Rebuild1.Caption  Оптимизировать
AddtoFavorites2.Caption Добавить в Избранное
Def1.Caption  Def
OriginalPalette1.Caption  Палитра дефа
NormalPalette1.Caption  Стандартная палитра
TransparentBackground1.Caption  Прозрачный фон
ShowAll1.Caption  Все типы
Spells1.Caption Заклинания
ShowCreatures1.Caption  Монстры
ShowMapObjects1.Caption Объекты карты
ShowHeroes1.Caption Герои
ShowTerrain1.Caption  Почвы
ShowCursors1.Caption  Курсоры
ShowInterface1.Caption  Интервыйс
ShowCombatHeroes1.Caption Герои в битве
Palette1.Caption  Палитра
Default1.Caption  По умолчанию
FirstKind1.Caption  Первый тип
SecondKind1.Caption Второй тип
ThirdKind1.Caption  Третий тип
Options1.Caption  Опции
Sortbyextension1.Caption  Сортировать по расширению
Backup1.Caption Бэкап оригинальных файлов
IgnoreUnpackingErrors1.Caption  Игнорировать ошибки распаковки
Language1.Caption Язык
Associate1.Caption  Ассоциировать с *.lod
Associate2.Caption  Ассоциировать с *.snd
Associate3.Caption  Ассоциировать с *.vid
Help1.Caption Справка
SaveDialogExport.Filter Все файлы|*.*
SaveDialogExport.Title  Экспорт
OpenDialogImport.Filter Все файлы|*.*
OpenDialogImport.Title  Добавить файлы
SaveDialogNew.Filter  Архив Heroes 3 (*.lod;*.snd;*.vid)|*.lod;*.snd;*.vid|Все файлы|*.*
SaveDialogNew.Title Новый архив
OpenDialogBitmapsLod.Title  Выберите архив bitmaps.lod

  [Help]
Memo1.Text  MMArchive v1.0.3
(c) Sergey Rozhenko
http://sites.google.com/site/sergroj/
sergroj@mail.ru

Данная программа может редактировать любые архивы Might&Magic 6-8 и Heroes 3, кроме *.hwl.
Здесь я объясню лишь самые неочевидные особенности программы и её использования.

Двойной щелчок по окну просмотра расширит его, чтобы полностью вместить изображение.


[ Оптимизация архивов ]
Замена и удаление файлов приводят к фрагментации архива и увеличению его размера. Если архив стал слишком большим, нажмите кнопку "Оптимизировать", чтобы уменьшить его размер до минимума.
Если вы меняете архив .vid, оптимизация особенно важна. MM7View вообще не сможет показывать или экспортировать добавленные файлы, пока вы не оптимизируете архив. mm8leveleditor в этой ситуации будет извлекать файлы большего размера. Все потому, что в архивы .vid не содержат информацию о размерах файлов. Мои программы извлекают эту информацию прямо из файлов, а другие редакторы справедливо ожидают, что .vid архивы никогда не будут фрагментированными. Игра показывает видео из фрагментированных архивов без проблем, т.к. ей для этого не нужны размеры файлов.


[ Добавление файлов ]
Для добавления файлов используйте кнопку "Добавить" или перетаскивайте файлы в окно программы.
У Героев в h3bitmap.lod картинки имеют расширение ".pcx", но вы можете использовать обычные bmp'шки - программа сама их переименует в ".pcx".

Для добавления картинок в архивы M&M всегда используйте расширение ".bmp". У битмапок в M&M всегда 256 цветов. Когда вы добавляете картинку в icons.lod, программа сама переводит её в 256 цветов, но для хорошего качества лучше делать это в профессиональном графическом редакторе.
При добавлении картинок в sprites.lod и bitmaps.lod может выскочить сообщение об ошибке, связанной с палитрой. Причина в том, что в sprites.lod картинки не содержат палитр, а хранят только номер палитры, соответствующий файлу "PAL*" из bitmaps.lod. Картинки в bitmaps.lod, хоть и хранят в себе палитру, тоже обязаны содержать номер палитры "PAL*". Таким образом, для каждой картинки из этих двух архивов, в bitmaps.lod должна существовать соответствующая палитра. Перед тем, как добавлять картинку, палитра которой отличается от существующих, вы должны добавить её палитру в bitmaps.lod под свободным номером. Программа найдет эту палитру, когда вы будете добавлять картинку.
Насчет расширения: если вы работали с mm8leveleditor, то знаете, что он использует расширения ".sprite.bmp", ".tga.bmp", ".4tga.0.bmp" - ".4tga.3.bmp". MMArchive всегда использует ".bmp". Уменьшенные картинки ".4tga.1.bmp" - ".4tga.3.bmp" он создает автоматически.

Чтобы дабавить палитру, возьмите битмапку и переименуйте её в палитру без расширения - например, "PAL722". Затем добавляйте её как обычно. Так же вы можете добавлять палитры в формате ".act".
С палитрами есть еще одна проблема. Карта может одновременно использовать только 50 палитр. Поэтому, вы должны использовать общую палитру для картинок с близкой цветовой гаммой, если вы хотите использовать их на одной карте. В будущем я, возможно, уберу это ограничение с помощью моих патчей.


[ Спрайты монстров в M&M ]
Со спрайтами монстров сложнее. У них есть 3 палитры, которые указаны в файле dsft.bin. Обычно их номера идут следующими после палитры, указанной для спрайтов в sprites.lod. Вы можете их посмотреть, выбрав в меню Палитра. Вот несколько советов, как создавать монстра:

Самый простой способ:
Отрендерите кадры для одного варианта монстра, переведите их в 256 цветов с общей палитрой с цветом фона на первой позиции (вы можете сделать это с помощью DefTool v2: http://sites.google.com/site/sergroj/wog/DefTool2.rar?attredirects=0). Сохраните один кадр под именем первой палитры.
Затем вам надо сделать еще 2 палитры. Для этого возьмите один кадр и измените его с помощью таких эффектов, как Оттенок/Насыщенность/Яркость (Hue/Saturation/Brightness) и Яркость/Контраст (Brightness/Contrast). Эти эффекты меняют только палитру, не влияя на то, каким точкам присвоены какие номера цветов. Сделайте так 2 палитры - и все готово. Добавляйте все это в sprites.lod.

Самый интересный способ:
1 набор кадров + 3 палитры - это самоограничение NWC, позволяющее уменьшить потребности в памяти, размер sprite.lod и ускорить загрузку. Вам их соблюдать не обязательно. Вы можете создать 3 варианта модели монстра, которые могут различаться не только цветами, но и формой, чем угодно. Это как 3 разных монстра - отрендерите их под разными именами, сконвертируйте каждого к своей палитре (так же, с помощью DefTool v2 или подобным способом). Затем добавьте их в sprites.lod и свяжитесь со мной, чтобы изменить dsft.bin. Так же вам надо будет использовать последнюю версию моего патча, потому что он убирает ограничения на количество загружаемых спрайтов и размер виртуальной памяти M&M.

Самый сложный способ:
Если вы посмотрите на монстров, выбрав "По умолчанию" в меню "Палитра", то поймете, как их рендерили в NWC. Большинство имеют область, которая не меняется, и несколько областей, меняющих цвет. Эти области не имеют между собой общих цветов. Если вы выберете этот способ, свяжитесь со мной по поводу изменения палитр - я дам вам для этого программку.

Caption Справка

